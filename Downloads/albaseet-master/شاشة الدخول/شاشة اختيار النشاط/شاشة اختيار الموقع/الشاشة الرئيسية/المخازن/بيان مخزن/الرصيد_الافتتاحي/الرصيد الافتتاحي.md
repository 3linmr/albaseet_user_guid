# الرصيد الافتتاحي

## الوصف
شاشة عرض الرصيد الافتتاحي، تُظهر الأصناف مع أرصدتها الافتتاحية عند بدء العمل.

## الوظائف
- عرض قائمة الأصناف مع الرصيد الافتتاحي
- إضافة رصيد افتتاحي جديد
- تعديل الرصيد الافتتاحي
- حذف الرصيد الافتتاحي
- البحث والتصفية
- تصدير البيانات
- طباعة التقرير

## عناصر الواجهة

### خيارات التحكم أعلى الجدول
في أعلى الجدول بجانب العنوان "الرصيد الافتتاحي" توجد خيارات للتحكم في طريقة عرض وتجميع البيانات:

#### التحويل
- **خيار 1**: "على مستوى الوحدة"
- **خيار 2**: "تحويل الى وحدة المفرد"
- **الوظيفة**: عرض الأرصدة بالوحدة الأساسية (حبة، علبة، كرتون...) أو تحويلها إلى وحدة المفرد أو وحدة أخرى مرتبطة بالصنف

#### التجميع
- **خيار 1**: "عرض على مستوى الصلاحية والتشغيلة"
- **خيار 2**: "مجمع بدون الصلاحية والتشغيلة"
- **الوظيفة**: تجميع الرصيد إما:
  - على مستوى الصلاحية (مفيد للأصناف الدوائية أو الغذائية)
  - على مستوى التشغيلة/الدفعة (Batch Number)
  - مجمع بدون تفاصيل الصلاحية والتشغيلة

#### الأدوات أعلى الجدول
- **إعادة تحميل**: لتحديث البيانات
- **إضافة خط +**: لإضافة صنف جديد برصيد افتتاحي
- **خط -**: لحذف أو إلغاء خط محدد
- **تصدير**: غالباً إلى Excel أو PDF
- **إعدادات الجدول**: لتخصيص الأعمدة الظاهرة
- **منتقي الأعمدة**: لتحديد الأعمدة التي تريد إظهارها/إخفاءها

#### عامل تصفية (فلتر)
في أسفل الجدول يمكن إنشاء فلاتر مخصصة مثل:
- عرض أصناف محددة
- عرض الأصناف ذات رصيد أكبر من صفر
- تصفية حسب معايير مختلفة

## الحقول المعروضة في الجدول
- **رقم الصنف**: الرقم التسلسلي للصنف
- **اسم الصنف**: اسم الصنف
- **الرقم الداخلي**: الرقم الداخلي للصنف
- **الصلاحية والتشغيلة**: معلومات الصلاحية والتشغيل
- **الوحدة**: وحدة قياس الصنف
- **الرصيد الافتتاحي**: الكمية الافتتاحية للصنف

## الحقول المطلوبة عند الإضافة/التعديل
- **الصنف** (إلزامي) - قائمة منسدلة
- **الرصيد الافتتاحي** (إلزامي) - قيمة رقمية
- **الوحدة** (إلزامي) - قائمة منسدلة
- **سعر التكلفة** (اختياري) - قيمة رقمية
- **التاريخ** (إلزامي) - تاريخ
- **الملاحظات** (اختياري) - نص

## أمثلة من البيانات الموجودة
- **"جرد"** – رصيد 12
- **"جديد 2"** – رصيد 10
- معظم الأصناف لها رصيد صفر

## معلومات إضافية
- **الغرض**: إدخال أرصدة البداية قبل بدء العمليات
- **معظم الأصناف**: لها رصيد صفر
- **بعض الأصناف**: لها أرصدة محددة مثل "جرد" و "جديد 2"
- **المرونة**: يمكن عرض كل صنف برصيده المجمع أو بالتفصيل مع كل تشغيله وتاريخ صلاحية

## أزرار التحكم
- **إضافة جديد**: لفتح نموذج إضافة رصيد افتتاحي جديد
- **تعديل**: لتعديل الرصيد الافتتاحي المحدد
- **حذف**: لحذف الرصيد الافتتاحي المحدد
- **بحث**: للبحث في قائمة الأرصدة الافتتاحية
- **تصدير**: لتصدير البيانات
- **طباعة**: لطباعة التقرير

## الربط الخلفي
- `Shared.API/Controllers/Inventory/OpeningInventoryController`
- `Shared.API/Controllers/Inventory/InventoryReportController`
- `Shared.API/Controllers/Setup/ItemsController`

## التفاصيل التقنية
- التحقق من صحة البيانات المدخلة
- ربط الأرصدة الافتتاحية بالأصناف
- إدارة حالة الأرصدة الافتتاحية
- التحقق من عدم تكرار الأرصدة للصنف الواحد
- تصدير البيانات بتنسيقات مختلفة
- طباعة تقارير الأرصدة الافتتاحية
- حساب القيم الإجمالية تلقائياً
- دعم تحويل الوحدات
- دعم تجميع البيانات حسب الصلاحية والتشغيلة
