# فواتير الكميات المرتجعة

## الوصف
شاشة إدارة فواتير الكميات المرتجعة، تتيح إصدار فواتير رسمية بالكميات المرتجعة.

## الوظائف
- عرض قائمة فواتير الكميات المرتجعة
- إضافة فاتورة مرتجعة جديدة
- تعديل فاتورة مرتجعة موجودة
- حذف فاتورة مرتجعة
- البحث والتصفية
- تصدير البيانات
- طباعة التقرير

## الحقول المعروضة في الجدول
- **رقم السند**: رقم الفاتورة المرتجعة
- **الرقم المرجعي**: رقم مرجعي للربط
- **العميل**: اسم العميل
- **الموقع**: المخزن أو الموقع
- **تاريخ السند**: تاريخ الفاتورة
- **الإجمالي**: قيمة الفاتورة
- **الصافي قبل الضريبة**: صافي المبلغ
- **قيمة الضريبة**: قيمة ضريبة القيمة المضافة
- **المبلغ بعد الضريبة**: المجموع النهائي
- **أدوات**: أزرار التحكم (تعديل، تفاصيل، طباعة، حذف)

## الحقول المطلوبة عند الإضافة/التعديل
- **رقم السند** (إلزامي)
- **الرقم المرجعي** (إلزامي)
- **العميل** (إلزامي) - قائمة منسدلة
- **الموقع** (إلزامي) - قائمة منسدلة
- **تاريخ السند** (إلزامي) - تاريخ
- **الأصناف المرتجعة** (إلزامي) - تفاصيل الأصناف
- **الإجمالي** (إلزامي) - رقم
- **الصافي قبل الضريبة** (إلزامي) - رقم
- **قيمة الضريبة** (إلزامي) - رقم
- **المبلغ بعد الضريبة** (إلزامي) - رقم
- **السبب** (إلزامي) - نص
- **الملاحظات** (اختياري)

## أزرار التحكم
- **إضافة جديد**: لفتح نموذج إضافة فاتورة مرتجعة جديدة
- **بحث**: للبحث في قائمة الفواتير
- **تصدير**: لتصدير البيانات
- **طباعة**: لطباعة التقرير

## عمود الأدوات
- **تعديل**: لتعديل الفاتورة المحددة
- **تفاصيل**: لعرض تفاصيل الفاتورة المحددة
- **طباعة**: لطباعة الفاتورة المحددة
- **حذف**: لحذف الفاتورة المحددة

## الربط الخلفي
- `Shared.API/Controllers/Sales/ReturnInvoiceController`
- `Shared.API/Controllers/Sales/SalesInvoiceController`
- `Shared.API/Controllers/Setup/CustomersController`
- `Shared.API/Controllers/Setup/LocationsController`

## التفاصيل التقنية
- التحقق من صحة البيانات المدخلة
- ربط الفواتير المرتجعة بالعملاء
- تحديث رصيد العميل تلقائياً
- التحقق من عدم تكرار أرقام السندات
- تصدير البيانات بتنسيقات مختلفة
- طباعة تقارير الفواتير المرتجعة
- حساب الضرائب تلقائياً
- التحقق من صحة العميل والموقع
- إدارة الكميات المرتجعة
