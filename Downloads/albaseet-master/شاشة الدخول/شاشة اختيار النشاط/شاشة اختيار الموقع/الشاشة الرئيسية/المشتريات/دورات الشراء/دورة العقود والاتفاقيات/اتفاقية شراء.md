# اتفاقية شراء

## الوصف
شاشة إدارة اتفاقيات الشراء، تتيح إنشاء أو متابعة العقود مع الموردين.

## الوظائف
- عرض قائمة اتفاقيات الشراء
- إضافة اتفاقية شراء جديدة
- تعديل اتفاقية شراء موجودة
- حذف اتفاقية شراء
- البحث والتصفية
- تصدير البيانات
- طباعة التقرير

## الحقول المعروضة في الجدول
- **رقم المستند**: الرقم التسلسلي للمستند (مثل PO-xx)
- **الرقم المرجعي**: الرقم المرجعي للمستند
- **الموقع**: المخزن المرتبط بالاتفاقية (مثل: متجر السعادة)
- **اسم المورد**: اسم المورد
- **نوع الشحن**: نوع الشحن (سيارة / باخرة / طائرة / إلخ)
- **تاريخ التسليم**: تاريخ التسليم المتفق عليه
- **الإجمالي**: إجمالي قيمة الاتفاقية
- **الصافي قبل الضريبة**: الصافي قبل الضريبة
- **الضرائب الأخرى**: الضرائب الأخرى
- **الحالة**: حالة الاتفاقية
- **أدوات**: أزرار التحكم (تعديل، تفاصيل، طباعة، حذف)

## الحقول المطلوبة عند الإضافة/التعديل
- **رقم المستند** (إلزامي)
- **الرقم المرجعي** (اختياري)
- **الموقع** (إلزامي) - قائمة منسدلة
- **اسم المورد** (إلزامي) - قائمة منسدلة
- **نوع الشحن** (إلزامي) - قائمة منسدلة
- **تاريخ التسليم** (إلزامي) - تاريخ
- **الإجمالي** (إلزامي) - رقم
- **الصافي قبل الضريبة** (إلزامي) - رقم
- **الضرائب الأخرى** (إلزامي) - رقم
- **الحالة** (إلزامي) - قائمة منسدلة
- **الملاحظات** (اختياري)

## أمثلة من البيانات الموجودة
- اتفاقيات شراء مختلفة مع الموردين

## أزرار التحكم
- **إضافة جديد**: لفتح نموذج إضافة اتفاقية جديدة
- **بحث**: للبحث في قائمة الاتفاقيات
- **تصدير**: لتصدير البيانات
- **طباعة**: لطباعة التقرير

## عمود الأدوات
- **تعديل**: لتعديل الاتفاقية المحددة
- **تفاصيل**: لعرض تفاصيل الاتفاقية المحددة
- **طباعة**: لطباعة الاتفاقية المحددة
- **حذف**: لحذف الاتفاقية المحددة

## الربط الخلفي
- `Shared.API/Controllers/Purchases/ContractAgreementController`
- `Shared.API/Controllers/Purchases/PurchaseController`
- `Shared.API/Controllers/Setup/SuppliersController`
- `Shared.API/Controllers/Setup/LocationsController`

## التفاصيل التقنية
- التحقق من صحة البيانات المدخلة
- ربط الاتفاقيات بالموردين والمواقع
- إدارة حالة الاتفاقيات
- التحقق من عدم تكرار أرقام المستندات
- تصدير البيانات بتنسيقات مختلفة
- طباعة تقارير الاتفاقيات
- حساب الضرائب تلقائياً
- إدارة تواريخ التسليم
- التحقق من صحة المورد والموقع
