# مرتجع كميات من فاتورة

## الوصف
شاشة إدارة مرتجعات الكميات من فواتير البيع المحددة.

## الوظائف
- عرض قائمة مرتجعات الكميات
- إضافة مرتجع كميات جديد
- تعديل مرتجع كميات موجود
- حذف مرتجع كميات
- البحث والتصفية
- تصدير البيانات
- طباعة التقرير

## الحقول المعروضة في الجدول
- **رقم السند**: رقم المرتجع
- **الرقم المرجعي**: رقم مرجعي للربط
- **رقم فاتورة البيع**: الفاتورة المرتبطة بالمرتجع
- **العميل**: اسم العميل
- **الموقع**: المخزن أو الموقع
- **تاريخ السند**: تاريخ المرتجع
- **الإجمالي**: قيمة المرتجع
- **أدوات**: أزرار التحكم (تعديل، تفاصيل، طباعة، حذف)

## الحقول المطلوبة عند الإضافة/التعديل
- **رقم السند** (إلزامي)
- **الرقم المرجعي** (إلزامي)
- **رقم فاتورة البيع** (إلزامي) - قائمة منسدلة
- **العميل** (إلزامي) - قائمة منسدلة
- **الموقع** (إلزامي) - قائمة منسدلة
- **تاريخ السند** (إلزامي) - تاريخ
- **الكميات المرتجعة** (إلزامي) - تفاصيل الأصناف
- **السبب** (إلزامي) - نص
- **الملاحظات** (اختياري)

## أزرار التحكم
- **إضافة جديد**: لفتح نموذج إضافة مرتجع جديد
- **بحث**: للبحث في قائمة المرتجعات
- **تصدير**: لتصدير البيانات
- **طباعة**: لطباعة التقرير

## عمود الأدوات
- **تعديل**: لتعديل المرتجع المحدد
- **تفاصيل**: لعرض تفاصيل المرتجع المحدد
- **طباعة**: لطباعة المرتجع المحدد
- **حذف**: لحذف المرتجع المحدد

## الربط الخلفي
- `Shared.API/Controllers/Sales/QuantityReturnController`
- `Shared.API/Controllers/Sales/SalesInvoiceController`
- `Shared.API/Controllers/Setup/CustomersController`
- `Shared.API/Controllers/Setup/LocationsController`

## التفاصيل التقنية
- التحقق من صحة البيانات المدخلة
- ربط المرتجعات بفواتير البيع
- تحديث رصيد العميل تلقائياً
- التحقق من عدم تكرار أرقام السندات
- تصدير البيانات بتنسيقات مختلفة
- طباعة تقارير المرتجعات
- حساب المبالغ تلقائياً
- التحقق من صحة فاتورة البيع
- التحقق من صحة العميل والموقع
