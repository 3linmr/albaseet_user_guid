# إضافة فاتورة شراء نقدًا جديدة

## الوصف
شاشة إضافة فاتورة شراء نقدًا جديدة.

## الوظائف
- إدخال بيانات الفاتورة الجديدة
- إضافة الأصناف والكميات
- حساب المبالغ تلقائياً
- حفظ الفاتورة الجديدة
- العودة للقائمة الرئيسية

## الحقول المطلوبة
### بيانات الفاتورة الأساسية
- **رقم المستند** (إلزامي) - رقم تسلسلي
- **الرقم المرجعي** (إلزامي) - رقم مرجعي
- **المورد** (إلزامي) - قائمة منسدلة
- **الموقع** (إلزامي) - قائمة منسدلة
- **تاريخ المستند** (إلزامي) - تاريخ
- **طريقة الدفع** (إلزامي) - نقدي

### تفاصيل الأصناف
- **الصنف** (إلزامي) - قائمة منسدلة
- **الكمية** (إلزامي) - رقم
- **الوحدة** (إلزامي) - قائمة منسدلة
- **سعر الوحدة** (إلزامي) - رقم
- **الخصم** (اختياري) - رقم
- **الضريبة** (إلزامي) - قائمة منسدلة
- **الإجمالي** (محسوب تلقائياً) - رقم

### المبالغ الإجمالية
- **إجمالي الأصناف** (محسوب تلقائياً) - رقم
- **إجمالي الخصومات** (محسوب تلقائياً) - رقم
- **إجمالي الضرائب** (محسوب تلقائياً) - رقم
- **الإجمالي النهائي** (محسوب تلقائياً) - رقم

## أزرار التحكم
- **حفظ**: لحفظ الفاتورة الجديدة
- **إلغاء**: للعودة للقائمة الرئيسية بدون حفظ
- **إضافة صنف**: لإضافة صنف جديد للفاتورة
- **حذف صنف**: لحذف الصنف المحدد
- **إعادة تعيين**: لمسح جميع الحقول

## التحقق من صحة البيانات
- التحقق من عدم تكرار رقم المستند
- التحقق من صحة المورد والموقع
- التحقق من وجود أصناف في الفاتورة
- التحقق من صحة الكميات والأسعار
- التحقق من صحة الضرائب

## الربط الخلفي
- `Shared.API/Controllers/Purchases/CashPurchaseInvoiceController`
- `Shared.API/Controllers/Setup/SuppliersController`
- `Shared.API/Controllers/Setup/LocationsController`
- `Shared.API/Controllers/Setup/ItemsController`

## التفاصيل التقنية
- التحقق من صحة البيانات المدخلة
- حساب المبالغ تلقائياً
- تحديث المخزون تلقائياً
- تحديث رصيد المورد تلقائياً
- إنشاء القيود المحاسبية تلقائياً
- تحديث القائمة الرئيسية تلقائياً
- إدارة الأخطاء والاستثناءات
